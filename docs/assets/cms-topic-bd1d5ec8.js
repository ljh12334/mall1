import{aj as E,i as p,_ as y,d as _,o as k,c as T,a as g,b as a,w as o,F,e as m}from"./index-32b023e5.js";import{c as P,E as s,a as A,b as v,d as z,e as N}from"./el-table-column-627de3cb.js";import{a as L,b as U,E as $,c as q}from"./el-form-item-dbf99e9b.js";const W=e=>p.request({url:"/mall/cms-topic/page",method:"post",data:e}),B=e=>p.request({url:"/mall/cms-topic/del/"+e.id,params:e}),j=e=>p.request({url:"/mall/cms-topic/add",method:"post",data:e}),D=e=>p.request({url:"/mall/cms-topic/edit",method:"post",data:e}),f=E.create({baseURL:"https://mall.qzimp.cn",withCredentials:!0});f.interceptors.request.use(e=>e,e=>Promise.reject(e));f.interceptors.response.use(e=>e,e=>Promise.reject(e));const I=_({data(){return{adCates:[],page:{total:0,current:1,size:10},dialogFormVisible:!1,adCate:{attendCount:"",id:0,attentionCount:"",awardName:"",attendType:"",content:""},formLabelWidth:80}},mounted(){this.getAdCatesPage(1)},methods:{toEdit(e){console.log(e),this.dialogFormVisible=!0,this.adCate=P(e)},getAdCatesPage(e){W({current:e,size:2}).then(n=>{console.log(n);const c=n.data.page;this.adCates=c.records,this.page=c}).catch(n=>{console.log(n)})},currentchange(e){this.getAdCatesPage(e),this.page.current=e},del(e){console.log(e),B({id:e}).then(n=>{if(n.success)this.getAdCatesPage(this.page.current);else return console.log(n.msg),!1}).catch(n=>{})},toAdd(){this.adCate={attendCount:"",id:0,attentionCount:"",awardName:"",attendType:"",content:""},this.dialogFormVisible=!0},save(){const e=this.adCate;e.id==0?j(e).then(t=>{if(t.success)this.dialogFormVisible=!1,this.getAdCatesPage(this.page.current),s(t.msg);else return s(t.msg),!1}).catch(t=>{s("网络错误联系管理员")}):D(e).then(t=>{if(t.success)this.dialogFormVisible=!1,this.getAdCatesPage(this.page.current),s(t.msg);else return s(t.msg),!1}).catch(t=>{s("网络错误联系管理员")})}}}),M={class:"adCates"},R={class:"adcate-tools"},G={class:"dialog-footer"};function H(e,t,n,c,J,K){const i=L,d=N,C=A,h=v,r=U,u=$,b=q,V=z;return k(),T(F,null,[g("div",M,[g("div",R,[a(i,{type:"warning",onClick:e.toAdd},{default:o(()=>[m("添加")]),_:1},8,["onClick"])]),a(C,{data:e.adCates,style:{width:"100%"}},{default:o(()=>[a(d,{fixed:"",prop:"id",label:"#",width:"50"}),a(d,{prop:"attendCount",label:"参与人数"}),a(d,{prop:"attentionCount",label:"关注人数"}),a(d,{prop:"awardName",label:"奖品名称"}),a(d,{prop:"attendType",label:"参与方式"}),a(d,{prop:"content",label:"话题内容"}),a(d,{fixed:"right",label:"操作",width:"120"},{default:o(l=>[a(i,{link:"",type:"primary",size:"small",onClick:w=>e.toEdit(l.row)},{default:o(()=>[m("更新")]),_:2},1032,["onClick"]),a(i,{link:"",type:"primary",size:"small",onClick:w=>e.del(l.row.id)},{default:o(()=>[m("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),a(h,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),a(V,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t[6]||(t[6]=l=>e.dialogFormVisible=l),title:"话题编辑"},{footer:o(()=>[g("span",G,[a(i,{onClick:t[5]||(t[5]=l=>e.dialogFormVisible=!1)},{default:o(()=>[m("Cancel")]),_:1}),a(i,{type:"primary",onClick:e.save},{default:o(()=>[m(" 保存 ")]),_:1},8,["onClick"])])]),default:o(()=>[a(b,{model:e.adCate},{default:o(()=>[a(u,{label:"参与人数","label-width":e.formLabelWidth},{default:o(()=>[a(r,{modelValue:e.adCate.attendCount,"onUpdate:modelValue":t[0]||(t[0]=l=>e.adCate.attendCount=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(u,{label:"参与方式","label-width":e.formLabelWidth},{default:o(()=>[a(r,{modelValue:e.adCate.attendType,"onUpdate:modelValue":t[1]||(t[1]=l=>e.adCate.attendType=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(u,{label:"关注人数","label-width":e.formLabelWidth},{default:o(()=>[a(r,{modelValue:e.adCate.attentionCount,"onUpdate:modelValue":t[2]||(t[2]=l=>e.adCate.attentionCount=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(u,{label:"奖励名称","label-width":e.formLabelWidth},{default:o(()=>[a(r,{modelValue:e.adCate.awardName,"onUpdate:modelValue":t[3]||(t[3]=l=>e.adCate.awardName=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(u,{label:"话题内容","label-width":e.formLabelWidth},{default:o(()=>[a(r,{modelValue:e.adCate.content,"onUpdate:modelValue":t[4]||(t[4]=l=>e.adCate.content=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const X=y(I,[["render",H]]);export{X as default};
